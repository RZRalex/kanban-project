<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="../static/kanbanstyle.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/solid.css" integrity="sha384-LA8Ug4T/nhVkyhrSmSirsoAo9iDrBk8E7U80aSPeD+w3vO8PzOJIS6agGcbIwwX0" crossorigin="anonymous">
    <link rel="stylesheet" href="../static/jquery-ui.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/fontawesome.css" integrity="sha384-wESLQ85D6gbsF459vf1CiZ2+rr+CsxRY0RpiF1tLlQpDnAgg6rwdsUF1+Ics2bni" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="../static/jquery-ui.js" defer></script>
    <script src="../static/kb.js" defer></script>
    <title>Can Do {{ work_board.title }}</title>
</head>
<body>
    <div class="w3-bar w3-light-blue">
        <a href="#" class="w3-bar-item w3-button w3-padding-16 w3-hover-light-blue">Welcome to Can Do</a>
        <a href="/profile/{{ user.id }}" class="w3-bar-item w3-button w3-padding-16">Profile</a>
        <a href="/select" class="w3-bar-item w3-button w3-padding-16">New Board +</a>
        <a href="/logout" class="w3-bar-item w3-button w3-padding-16 w3-right">Logout</a>
    </div>
    <div class="title w3-bar w3-amber w3-margin-bottom">
        <h1 class="w3-bar-item">{{ board.title }}</h1>
        <button class="edit-btn w3-button">
            <h2><i class="fas fa-edit w3-xlarge"></i></h2>
        </button>
    </div>

    <div class="wrapper">
        <div class="w3-row" id="workspace">

            {% for column in board.columns.all %}
                <div class="w3-col tcol w3-border w3-round-xlarge {{ column.color }}">
                    <div class="col-ui w3-container w3-border-bottom">
                        <h5 class="title">{{ column.title }}</h5>
                        <form action="/edit_col/{{ column.id }}" class="colinput">
                            {% csrf_token %}
                            <p>
                                <input type="text" name="colname" class="w3-input" value="{{ column.title }}">
                            </p>
                            <button type="submit" class="w3-button"><i class="fas fa-check-circle  w3-medium w3-text-green"></i></button>
                            <i class="colcancel fas fa-times-circle w3-button w3-medium w3-text-red"></i>
                            <!-- <button class="del w3-button w3-tiny w3-red w3-right w3-hover-black">Delete Column</button> -->
                            <!-- delete column btn needs to be elsewhere to submit properly -->
                            <!-- <button class="editok w3-button w3-small w3-circle"></button> -->
                        </form>
                        <div>
                            <button class="ellips-btn w3-button w3-circle w3-right"><i class="fas fa-ellipsis-v"></i></button>
                            <button class="add-btn w3-button w3-circle w3-right"><i class="fas fa-plus fa-fw w3-small"></i></button>
                        </div>
                        
                    </div>
                    <div class="notes sortablecol">
                        <div class="addcard w3-container w3-card-4 w3-margin w3-round-large">
                            <form action="/new_card/{{ column.id }}" method="POST">
                                {% csrf_token %}
                                <p>
                                    <label for="acard">New Card Title</label>
                                    <input type="text" id="acard" name="cardname" class="w3-input w3-border w3-light-grey">
                                </p>
                                <p>
                                    <textarea name="info" id="text" cols="30" rows="3" placeholder="Enter a Note" class="w3-input"></textarea>
                                </p>
                                <button type="submit" class="cardok w3-button w3-green w3-round w3-margin-bottom">Enter</button>
                                <a class="cardcancel w3-button w3-border w3-text-red w3-border-gray w3-round w3-margin-bottom w3-right">Cancel</a>
                            </form>
                        </div>
                        {% for cards in column.cards.all reversed %}
                            <div class="cardst w3-container w3-card-4 w3-margin w3-round-large">
                                <h5>{{ cards.subject }}</h5>
                                <button class="card-edit w3-button w3-tiny w3-circle w3-right"><i class="fas fa-ellipsis-v"></i></button>
                                <hr>
                                <p class="content">{{ cards.content }}</p>
                                <!-- insert edit card content -->
                                <form action="/edit_card/{{ cards.id }}" method="POST" class="card_form">
                                    {% csrf_token %}
                                    <p>
                                        <input type="text" name="cardedit" class="w3-input w3-border w3-light-grey" value="{{ cards.subject }}">
                                    </p>
                                    <p>
                                        <textarea name="editinfo" cols="30" rows="3" class="w3-input">{{ cards.content }}</textarea>
                                    </p>
                                    <button type="submit" class="cardok w3-button w3-green w3-round w3-margin-bottom">Enter</button>
                                    <a class="cardno w3-button w3-border w3-text-red w3-border-gray w3-round w3-margin-bottom w3-right">Cancel</a>
                                </form>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
            
            <!-- model column -->
            <!-- <div class="w3-col tcol w3-border w3-round-xlarge lite-gray">
                <div class="w3-container w3-border-bottom">
                    <h3>Done</h3>
                </div>
                <div class="notes">
                    <div class="w3-container w3-card-4 w3-margin w3-round-large">
                        <h5>Lorem Card</h5>
                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ut in molestias soluta tenetur nam rem officia, nisi eos. Suscipit, porro tempora quae odio error minus soluta laborum neque magni laboriosam?</p>
                    </div>
                </div>
            </div> -->
            
            <button class="w3-col addcol w3-button w3-round-xlarge"><h4><i class="fas fa-plus fa-fw w3-medium"></i> Add column</h4></button>

    
            <!-- End of #workspace -->
        </div>
    </div>


    <!-- Modal space -->

    <!-- New Column Modal -->
    <div id="coladd" class="w3-modal">
        <div class="w3-modal-content">
            <div class="w3-container">
                <span class="w3-button w3-display-topright">&times;</span>
                <form action="/new_column/{{ board.id }}" method="POST">
                    {% csrf_token %}
                    <p>
                    <label for="colm">Column Title</label>
                    <input type="text" id="colm" name="coltitle" class="w3-input w3-border w3-light-grey"></p>

                    <button type="submit" class="w3-button w3-green w3-round w3-margin-bottom">Enter</button>
                    <a class="cancel w3-button w3-border w3-border-red w3-text-red w3-round w3-margin-bottom w3-right">Cancel</a>
                </form>
            </div>
        </div>
    </div>


    <!-- Edit Board Title Modal -->
    <div id="editproject" class="w3-modal">
        <div class="w3-modal-content">
            <div class="w3-container">
                <span class="w3-button w3-display-topright">&times;</span>
                <form action="/edit_board/{{ board.id }}" method="POST">
                    {% csrf_token %}
                    <p>
                    <label for="bedit">Project Title</label>
                    <input type="text" id="bedit" name="boardname" class="w3-input w3-border w3-light-grey"></p>

                    <button type="submit" class="w3-button w3-green w3-round w3-margin-bottom">Enter</button>
                    <a class="cancel w3-button w3-border w3-border-red w3-text-red w3-round w3-margin-bottom w3-right">Cancel</a>
                </form>
            </div>
        </div>
    </div>
    

    <!-- Edit Board title Modal -->

</body>
</html>